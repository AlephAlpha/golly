<html>
<title>Golly Help: Python Scripting</title>
<body bgcolor="#FFFFCE">

<p>
<dd><a href="#install"><b>Installing Python</b></a></dd>
<dd><a href="#examples"><b>Example scripts</b></a></dd>
<dd><a href="#commands"><b>Golly's scripting commands</b></a></dd>
<dd><a href="#lists"><b>Cell lists and rectangle lists</b></a></dd>
<dd><a href="#glife"><b>Using the glife package</b></a></dd>
<dd><a href="#problems"><b>Potential problems</b></a></dd>
<dd><a href="#macpython"><b>Universal Python on Mac OS X</b></a></dd>
<dd><a href="#copyright"><b>Python copyright notice</b></a></dd>
</p>


<p><a name="install">
&nbsp;<br>
<font size=+1><b>Installing Python</b></font>

<p>
Before you can run a .py script, Python needs to be installed on your system.
Mac OS X users don't need to do anything because Python is already installed
(but see <a href="#macpython">below</a> for how to force Golly to use a newer
version of Python).
Windows and Linux users can download a Python installer from
<a href="http://www.python.org/download/">www.python.org/download</a>.

<p>
On Windows and Linux, the Python library is loaded at runtime (the first time
you try to run a script).  Golly initially attempts to load a particular
version of the Python library: python24.dll on Windows or libpython2.4.so
on Linux.  The numbers correspond to Python version 2.4.
If that library can't be found then you'll be
prompted to enter a different library name matching the version of Python
installed on your system.  A successfully loaded library is remembered
(in your GollyPrefs file) so you won't get the prompt again unless you
remove Python or install a new version.  If Python isn't installed then
you'll have to hit Cancel and you won't be able to run any .py scripts.


<p><a name="examples">
&nbsp;<br>
<font size=+1><b>Example scripts</b></font>

<p>
The Scripts folder supplied with Golly contains a number of example Python scripts:
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr>
   <td><b>density.py</b></td><td width=10> </td>
   <td> &mdash; calculates the density of the current pattern</td>
</tr>
<tr>
   <td><b>envelope.py</b></td><td width=10> </td>
   <td> &mdash; uses multiple layers to remember a pattern's live cells</td>
</tr>
<tr>
   <td><b>goto.py</b></td><td width=10> </td>
   <td> &mdash; goes to a given generation</td>
</tr>
<tr>
   <td><b>gun-demo.py</b></td><td width=10> </td>
   <td> &mdash; constructs a few spaceship guns</td>
</tr>
<tr>
   <td><b>heisenburp.py</b></td><td width=10> </td>
   <td> &mdash; illustrates the use of cloned layers</td>
</tr>
<tr>
   <td><b>invert.py</b></td><td width=10> </td>
   <td> &mdash; inverts all cell states in the current selection</td>
</tr>
<tr>
   <td><b>metafier.py</b></td><td width=10> </td>
   <td> &mdash; converts the current selection into a meta pattern</td>
</tr>
<tr>
   <td><b>oscar.py</b></td><td width=10> </td>
   <td> &mdash; detects oscillating patterns, including spaceships</td>
</tr>
<tr>
   <td><b>pd-glider.py</b></td><td width=10> </td>
   <td> &mdash; creates a set of pentadecathlon+glider collisions</td>
</tr>
<tr>
   <td><b>pop-plot.py</b></td><td width=10> </td>
   <td> &mdash; displays a plot of population versus time</td>
</tr>
<tr>
   <td><b>shift.py</b></td><td width=10> </td>
   <td> &mdash; shifts the current selection by given x y amounts</td>
</tr>
<tr>
   <td><b>slide-show.py</b></td><td width=10> </td>
   <td> &mdash; displays all patterns in the Patterns folder</td>
</tr>
<tr>
   <td><b>tile.py</b></td><td width=10> </td>
   <td> &mdash; tiles the current selection with the pattern inside it</td>
</tr>
<tr>
   <td><b>tile-with-clip.py</b></td><td width=10> </td>
   <td> &mdash; tiles the current selection with the clipboard pattern</td>
</tr>
</table>
</dd>
</p>

<p>
The easiest way to run one of these scripts is to tick the <b>Show Scripts</b>
item in the File menu and then simply click on the script you wish to run.
You can also select one of the <b>Run</b> items in the File menu.

<!-- no need to mention this???
<p>
The current working directory is temporarily changed to the location
of the selected script file.  This is so a <b>save("foo.rle",...)</b>
command will save the file in the same directory as the script.
-->

<p>
If a script called <b>golly-start.py</b> exists in the same folder as the Golly
application then it is automatically executed when Golly starts up.

<p>
There are a number of ways to abort a running script.  Hit the escape key,
or click on the stop button in the tool bar, or select the Stop item in the
Control menu.


<p><a name="commands">
&nbsp;<br>
<font size=+1><b>Golly's scripting commands</b></font>

<p>
This section describes all the commands that can be used in a script after
importing the <b>golly</b> module.  Commands are grouped by function
(<a href="#filing"><b>filing</b></a>,
<a href="#editing"><b>editing</b></a>,
<a href="#control"><b>control</b></a>,
<a href="#viewing"><b>viewing</b></a>,
<a href="#layers"><b>layers</b></a>
and <a href="#miscellaneous"><b>miscellaneous</b></a>)
or you can search for individual commands alphabetically:
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr>
<td valign=top>
<a href="#addlayer"><b>addlayer</b></a><br>
<a href="#advance"><b>advance</b></a><br>
<a href="#appdir"><b>appdir</b></a><br>
<a href="#autoupdate"><b>autoupdate</b></a><br>
<a href="#check"><b>check</b></a><br>
<a href="#clear"><b>clear</b></a><br>
<a href="#clone"><b>clone</b></a><br>
<a href="#copy"><b>copy</b></a><br>
<a href="#cut"><b>cut</b></a><br>
<a href="#dellayer"><b>dellayer</b></a><br>
<a href="#dokey"><b>dokey</b></a><br>
<a href="#duplicate"><b>duplicate</b></a><br>
<a href="#empty"><b>empty</b></a><br>
<a href="#error"><b>error</b></a><br>
<a href="#evolve"><b>evolve</b></a>
</td>
<td valign=top width=30> </td>
<td valign=top>
<a href="#exit"><b>exit</b></a><br>
<a href="#fit"><b>fit</b></a><br>
<a href="#fitsel"><b>fitsel</b></a><br>
<a href="#flip"><b>flip</b></a><br>
<a href="#getbase"><b>getbase</b></a><br>
<a href="#getcell"><b>getcell</b></a><br>
<a href="#getcells"><b>getcells</b></a><br>
<a href="#getclip"><b>getclip</b></a><br>
<a href="#getcolor"><b>getcolor</b></a><br>
<a href="#getcursor"><b>getcursor</b></a><br>
<a href="#getgen"><b>getgen</b></a><br>
<a href="#getkey"><b>getkey</b></a><br>
<a href="#getlayer"><b>getlayer</b></a><br>
<a href="#getmag"><b>getmag</b></a><br>
<a href="#getname"><b>getname</b></a>
</td>
<td valign=top width=30> </td>
<td valign=top>
<a href="#getoption"><b>getoption</b></a><br>
<a href="#getpop"><b>getpop</b></a><br>
<a href="#getpos"><b>getpos</b></a><br>
<a href="#getrect"><b>getrect</b></a><br>
<a href="#getrule"><b>getrule</b></a><br>
<a href="#getselrect"><b>getselrect</b></a><br>
<a href="#getstep"><b>getstep</b></a><br>
<a href="#getstring"><b>getstring</b></a><br>
<a href="#hash"><b>hash</b></a><br>
<a href="#load"><b>load</b></a><br>
<a href="#maxlayers"><b>maxlayers</b></a><br>
<a href="#movelayer"><b>movelayer</b></a><br>
<a href="#new"><b>new</b></a><br>
<a href="#note"><b>note</b></a><br>
<a href="#numlayers"><b>numlayers</b></a>
</td>
<td valign=top width=30> </td>
<td valign=top>
<a href="#open"><b>open</b></a><br>
<a href="#parse"><b>parse</b></a><br>
<a href="#paste"><b>paste</b></a><br>
<a href="#putcells"><b>putcells</b></a><br>
<a href="#randfill"><b>randfill</b></a><br>
<a href="#reset"><b>reset</b></a><br>
<a href="#rotate"><b>rotate</b></a><br>
<a href="#run"><b>run</b></a><br>
<a href="#save"><b>save</b></a><br>
<a href="#select"><b>select</b></a><br>
<a href="#setbase"><b>setbase</b></a><br>
<a href="#setcell"><b>setcell</b></a><br>
<a href="#setcolor"><b>setcolor</b></a><br>
<a href="#setcursor"><b>setcursor</b></a><br>
<a href="#setlayer"><b>setlayer</b></a>
</td>
<td valign=top width=30> </td>
<td valign=top>
<a href="#setmag"><b>setmag</b></a><br>
<a href="#setname"><b>setname</b></a><br>
<a href="#setoption"><b>setoption</b></a><br>
<a href="#setpos"><b>setpos</b></a><br>
<a href="#setrule"><b>setrule</b></a><br>
<a href="#setstep"><b>setstep</b></a><br>
<a href="#show"><b>show</b></a><br>
<a href="#shrink"><b>shrink</b></a><br>
<a href="#step"><b>step</b></a><br>
<a href="#store"><b>store</b></a><br>
<a href="#transform"><b>transform</b></a><br>
<a href="#update"><b>update</b></a><br>
<a href="#visrect"><b>visrect</b></a><br>
<a href="#warn"><b>warn</b></a>
</td>
</tr>
</table>
</dd>
</p>

<p><a name="filing">
&nbsp;<br>
FILING COMMANDS

<a name="open"></a><p><dt><b>open(<i>filename, remember=False</i>)</b></dt>
<dd>
Open the given pattern file.
A non-absolute path is relative to the location of the script.
The 2nd parameter is optional (default = False) and specifies if the file
should be remembered in the Open Recent submenu.
</dd>
<dd> Example: <b>golly.open("my-patterns/foo.rle")</b></dd>
</p>

<a name="save"></a><p><dt><b>save(<i>filename, format, remember=False</i>)</b></dt>
<dd>
Save the current pattern in a given file using the specified format ("rle" or "mc").
A non-absolute path is relative to the location of the script.
The 3rd parameter is optional (default = False) and specifies if the file
should be remembered in the Open Recent submenu.
If the <b>savexrle</b> option is True then extended RLE format is used
(see the <a href="file.html#xrle">Save Extended RLE</a> item for details).
</dd>
<dd> Example: <b>golly.save("foo.rle", "rle", True)</b></dd>
</p>

<a name="load"></a><p><dt><b>load(<i>filename</i>)</b></dt>
<dd>
Read the given pattern file and return a cell list.
</dd>
<dd> Example: <b>blinker = golly.load("blinker.rle")</b></dd>
</p>

<a name="store"></a><p><dt><b>store(<i>cell_list, filename</i>)</b></dt>
<dd>
Write the given cell list to the specified file in RLE format.
If the <b>savexrle</b> option is True then extended RLE format is used
(see the <a href="file.html#xrle">Save Extended RLE</a> item for details).
</dd>
<dd> Example: <b>golly.store(clist, "foo.rle")</b></dd>
</p>

<a name="appdir"></a><p><dt><b>appdir()</b></dt>
<dd>
Return the location of the Golly application as a string.
</dd>
<dd> Example: <b>golly.open(appdir() + "Patterns/Breeders/breeder.lif")</b></dd>
</p>

<p><a name="editing">
&nbsp;<br>
EDITING COMMANDS

<a name="new"></a><p><dt><b>new(<i>title</i>)</b></dt>
<dd>
Create a new, empty universe and set the window title.
If the given title is empty then the current title won't change.
</dd>
<dd> Example: <b>golly.new("test-pattern")</b></dd>
</p>

<a name="cut"></a><p><dt><b>cut()</b></dt>
<dd>
Cut the current selection to the clipboard.
</dd>
</p>

<a name="copy"></a><p><dt><b>copy()</b></dt>
<dd>
Copy the current selection to the clipboard.
</dd>
</p>

<a name="clear"></a><p><dt><b>clear(<i>where</i>)</b></dt>
<dd>
Clear inside (where = 0) or outside (where = 1) the current selection.
</dd>
<dd> Example: <b>golly.clear(1)</b></dd>
</p>

<a name="paste"></a><p><dt><b>paste(<i>x, y, mode</i>)</b></dt>
<dd>
Paste the clipboard pattern at x,y using the given mode ("copy", "or" or "xor").
</dd>
<dd> Example: <b>golly.paste(0, 0, "or")</b></dd>
</p>

<a name="shrink"></a><p><dt><b>shrink()</b></dt>
<dd>
Shrink the current selection to the smallest rectangle enclosing all of the
selection's live cells.
</dd>
</p>

<a name="randfill"></a><p><dt><b>randfill(<i>percentage</i>)</b></dt>
<dd>
Randomly fill the current selection to a density specified by the given
percentage (1 to 100).
</dd>
<dd> Example: <b>golly.randfill(50)</b></dd>
</p>

<a name="flip"></a><p><dt><b>flip(<i>direction</i>)</b></dt>
<dd>
Flip the current selection left-right (direction = 0) or top-bottom (direction = 1).
</dd>
</p>

<a name="rotate"></a><p><dt><b>rotate(<i>direction</i>)</b></dt>
<dd>
Rotate the current selection 90 degrees clockwise (direction = 0) or
anticlockwise (direction = 1).
</dd>
</p>

<a name="evolve"></a><p><dt><b>evolve(<i>cell_list, numgens</i>)</b></dt>
<dd>
Advance the pattern in the given cell list by the specified number of generations
and return the resulting cell list.
</dd>
<dd> Example: <b>newpatt = golly.evolve(currpatt, 100)</b></dd>
</p>

<a name="transform"></a><p><dt><b>transform(<i>cell_list, x0, y0, axx=1, axy=0, ayx=0, ayy=1</i>)</b></dt>
<dd>
Apply an affine transformation to the given cell list and return the resulting cell list.
For each x,y cell in the input list the corresponding xn,yn cell in the output list
is calculated as xn = x0 + x*axx + y*axy, yn = y0 + x*ayx + y*ayy.
</dd>
<dd> Example: <b>rot_blinker = golly.transform(blinker, 0, 0, 0, -1, 1, 0)</b></dd>
</p>

<a name="parse"></a><p><dt><b>parse(<i>string, x0=0, y0=0, axx=1, axy=0, ayx=0, ayy=1</i>)</b></dt>
<dd>
Parse an RLE or Life 1.05 string and return an optionally transformed cell list.
</dd>
<dd> Example: <b>blinker = golly.parse("3o!")</b></dd>
</p>

<a name="putcells"></a><p><dt><b>putcells(<i>cell_list, x0=0, y0=0, axx=1, axy=0, ayx=0, ayy=1, mode="or"</i>)</b></dt>
<dd>
Paste the given cell list into the current universe using an optional affine transformation
and optional mode ("copy", "or", "xor", or "not").
</dd>
<dd> Example: <b>golly.putcells(currpatt, 6, -40, 1, 0, 0, 1, "xor")</b></dd>
</p>

<a name="getcells"></a><p><dt><b>getcells(<i>rect_list</i>)</b></dt>
<dd>
Return any live cells in the specified rectangle as a cell list.
The given list can be empty (in which case the cell list is empty)
or it must represent a valid rectangle of the form [x,y,width,height].
</dd>
<dd> Example: <b>clist = golly.getcells( getrect() )</b></dd>
</p>

<a name="hash"></a><p><dt><b>hash(<i>rect_list</i>)</b></dt>
<dd>
Return an integer hash value for the pattern in the given rectangle.
Two identical patterns will have the same hash value, regardless of their
location in the universe.  The hash command provides a fast way to
detect pattern equality, but there is a tiny probability that two different
patterns will have the same hash value, so you might need to use additional
(slower) tests to check for true pattern equality.
</dd>
<dd> Example: <b>h = golly.hash( getrect() )</b></dd>
</p>

<a name="getclip"></a><p><dt><b>getclip()</b></dt>
<dd>
Parse the pattern data in the clipboard and return a cell list.
</dd>
<dd> Example: <b>clist = golly.getclip()</b></dd>
</p>

<a name="select"></a><p><dt><b>select(<i>rect_list</i>)</b></dt>
<dd>
Create a selection if the given list represents a valid rectangle of the form
[x,y,width,height] or remove the current selection if the given list is [].
</dd>
<dd> Example: <b>golly.select( [-10,-10,20,20] )</b></dd>
</p>

<a name="getrect"></a><p><dt><b>getrect()</b></dt>
<dd>
Return the current pattern's bounding box as a list.
If there is no pattern then the list is empty ([]), otherwise the
list is of the form [x,y,width,height].
</dd>
<dd> Example: <b>if len(golly.getrect()) == 0: golly.show("No pattern.")</b></dd>
</p>

<a name="getselrect"></a><p><dt><b>getselrect()</b></dt>
<dd>
Return the current selection rectangle as a list.
If there is no selection then the list is empty ([]), otherwise the
list is of the form [x,y,width,height].
</dd>
<dd> Example: <b>if len(golly.getselrect()) == 0: golly.show("No selection.")</b></dd>
</p>

<a name="setcell"></a><p><dt><b>setcell(<i>x, y, state</i>)</b></dt>
<dd>
Set the given cell to the specified state (0 for a dead cell, 1 for a live cell).
</dd>
</p>

<a name="getcell"></a><p><dt><b>getcell(<i>x, y</i>)</b></dt>
<dd>
Return the state of the given cell.
The following example inverts the state of the cell at 0,0.
</dd>
<dd> Example: <b>golly.setcell(0, 0, 1 - golly.getcell(0, 0))</b></dd>
</p>

<a name="setcursor"></a><p><dt><b>setcursor(<i>index</i>)</b></dt>
<dd>
Set the cursor according to the given index and return the old cursor index.
The valid index values are 0 for the pencil cursor, 1 for the cross cursor,
2 for the hand cursor, 3 for the zoom-in cursor and 4 for the zoom-out cursor.
</dd>
<dd> Example: <b>oldcurs = golly.setcursor(3)</b></dd>
</p>

<a name="getcursor"></a><p><dt><b>getcursor()</b></dt>
<dd>
Return the current cursor index.
</dd>
</p>

<p><a name="control">
&nbsp;<br>
CONTROL COMMANDS

<a name="run"></a><p><dt><b>run(<i>numgens</i>)</b></dt>
<dd>
Run the current pattern for the specified number of generations.
Intermediate generations are never displayed, and the final generation
is only displayed if the current <b>autoupdate</b> setting is True.
</dd>
<dd> Example: <b>golly.run(100)</b></dd>
</p>

<a name="step"></a><p><dt><b>step()</b></dt>
<dd>
Run the current pattern for the current step.
Intermediate generations are never displayed, and the final generation
is only displayed if the current <b>autoupdate</b> setting is True.
</dd>
</p>

<a name="setstep"></a><p><dt><b>setstep(<i>exp</i>)</b></dt>
<dd>
Set the step to base^exp (use the <b>setbase</b> command to change the base).
A negative exponent sets the step to 1; it also sets a delay between each
step, but that delay is ignored by the <b>run</b> and <b>step</b> commands.
</dd>
<dd> Example: <b>golly.setstep(0)</b></dd>
</p>

<a name="getstep"></a><p><dt><b>getstep()</b></dt>
<dd>
Return the current step exponent.
</dd>
<dd> Example: <b>golly.setstep( golly.getstep() + 1 )</b></dd>
</p>

<a name="setbase"></a><p><dt><b>setbase(<i>base</i>)</b></dt>
<dd>
Set the base step for the current universe type (hashing or non-hashing),
so you might need to call <b>setoption("hashing",True/False)</b> first.
The given base must be an integer from 2 to 10000.
The current step is also changed to base^exp where exp is the current step
exponent returned by <b>getstep()</b>.
</dd>
<dd> Example: <b>golly.setbase(2)</b></dd>
</p>

<a name="getbase"></a><p><dt><b>getbase()</b></dt>
<dd>
Return the current base step for the current universe type (hashing or non-hashing).
</dd>
</p>

<a name="advance"></a><p><dt><b>advance(<i>where, numgens</i>)</b></dt>
<dd>
Advance inside (where = 0) or outside (where = 1) the current selection by the
specified number of generations.  The generation count does not change.
</dd>
<dd> Example: <b>golly.advance(0, 3)</b></dd>
</p>

<a name="reset"></a><p><dt><b>reset()</b></dt>
<dd>
Restore the starting pattern and generation count.
Also reset the rule, scale, location, step exponent and hashing option
to the values they had at the starting generation.
The starting generation is usually zero, but it can be larger after
loading an RLE/macrocell file that stores a non-zero generation count.
</dd>
</p>

<a name="getgen"></a><p><dt><b>getgen(<i>sepchar='\0'</i>)</b></dt>
<dd>
Return the current generation count as a string.
The optional parameter (default = '\0') specifies a separator
character that can be used to make the resulting string more readable.
For example, <b>golly.getgen(',')</b> would return a string like "1,234,567"
but <b>golly.getgen()</b> would return "1234567".  Use the latter call if
you want to do arithmetic on the generation count because then it's
easy to use <b>int</b> to convert the string to an integer.
Note that Python supports arbitrarily large integers.
</dd>
<dd> Example: <b>gen = int( golly.getgen() )</b></dd>
</p>

<a name="getpop"></a><p><dt><b>getpop(<i>sepchar='\0'</i>)</b></dt>
<dd>
Return the current population as a string.
The optional parameter (default = '\0') specifies a separator
character that can be used to make the resulting string more readable.
For example, <b>golly.getpop(',')</b> would return a string like "1,234,567"
but <b>golly.getpop()</b> would return "1234567".  Use the latter call if
you want to do arithmetic on the population count.
The following example converts the population to a floating point number.
</dd>
<dd> Example: <b>pop = float( golly.getpop() )</b></dd>
</p>

<a name="empty"></a><p><dt><b>empty()</b></dt>
<dd>
Return True if the universe is empty or False if there is at least one live cell.
This is much more efficient than testing <b>getpop() == "0"</b>.
</dd>
<dd> Example: <b>if golly.empty(): golly.show("All cells are dead.")</b></dd>
</p>

<a name="setrule"></a><p><dt><b>setrule(<i>string</i>)</b></dt>
<dd>
Set the current rule according to the given string.
If the string is invalid then you'll get an error message and the script will
be aborted (and the original rule will be restored).
</dd>
<dd> Example: <b>golly.setrule("b3/s23")</b></dd>
</p>

<a name="getrule"></a><p><dt><b>getrule()</b></dt>
<dd>
Return the current rule as a string.
</dd>
<dd> Example: <b>oldrule = golly.getrule()</b></dd>
</dd>
</p>

<p><a name="viewing">
&nbsp;<br>
VIEWING COMMANDS

<a name="setpos"></a><p><dt><b>setpos(<i>x, y</i>)</b></dt>
<dd>
Change the position of the viewport so the given cell is in the middle.
The x,y coordinates are given as strings so the viewport can be moved
to any location in the unbounded universe.
Commas and other punctuation marks can be used to make large numbers more readable.
Apart from a leading minus sign, most non-digits are simply ignored;
only alphabetic characters will cause an error message.
Note that positive y values increase downwards in Golly's coordinate system.
</dd>
<dd> Example: <b>golly.setpos("1,000,000,000,000", "-123456")</b></dd>
</p>

<a name="getpos"></a><p><dt><b>getpos(<i>sepchar='\0'</i>)</b></dt>
<dd>
Return the x,y position of the viewport's middle cell in the form
of a Python tuple containing two strings.
The optional parameter (default = '\0') specifies a separator
character that can be used to make the resulting strings more readable.
For example, <b>golly.getpos(',')</b> might return two strings like "1,234"
and "-5,678" but <b>golly.getpos()</b> would return "1234" and "-5678".
Use the latter call if you want to do arithmetic on the x,y values,
or just use the <b>getposint()</b> function defined
in the <a href="#glife"><b>glife</b></a> package.
</dd>
<dd> Example: <b>x, y = golly.getpos()</b></dd>
</p>

<a name="setmag"></a><p><dt><b>setmag(<i>mag</i>)</b></dt>
<dd>
Set the magnification, where 0 corresponds to the scale 1:1, 1 = 1:2, -1 = 2:1, etc.
The maximum allowed magnification is 4 (= 1:16).
</dd>
<dd> Example: <b>golly.setmag(0)</b></dd>
</p>

<a name="getmag"></a><p><dt><b>getmag()</b></dt>
<dd>
Return the current magnification.
</dd>
<dd> Example: <b>golly.setmag( golly.getmag() - 1 )</b></dd>
</p>

<a name="fit"></a><p><dt><b>fit()</b></dt>
<dd>
Fit the entire pattern in the viewport.
</dd>
</p>

<a name="fitsel"></a><p><dt><b>fitsel()</b></dt>
<dd>
Fit the current selection in the viewport.
The script aborts with an error message if there is no selection.
</dd>
</p>

<a name="visrect"></a><p><dt><b>visrect(<i>rect_list</i>)</b></dt>
<dd>
Return True if the given rectangle is completely visible in the viewport.
The rectangle must be a list of the form [x,y,width,height].
</dd>
<dd> Example: <b>if golly.visrect( [0,0,44,55] ): . . .</b></dd>
</p>

<a name="autoupdate"></a><p><dt><b>autoupdate(<i>bool</i>)</b></dt>
<dd>
When Golly runs a script this setting is initially False.
If the given parameter is True then Golly will automatically update the
viewport and the status bar after each command that changes the
universe or viewport in some way.  Useful for debugging Python scripts.
</dd>
<dd> Example: <b>golly.autoupdate(True)</b></dd>
</p>

<a name="update"></a><p><dt><b>update()</b></dt>
<dd>
Immediately update the viewport and the status bar, regardless of the
current <b>autoupdate</b> setting.  Note that Golly always does an
update when a script finishes.
</dd>
</p>

<p><a name="layers">
&nbsp;<br>
LAYER COMMANDS

<a name="addlayer"></a><p><dt><b>addlayer()</b></dt>
<dd>
Add a new, empty layer immediately after the current layer and
return the new layer's index, an integer from 0 to <b>numlayers()</b> - 1.
The new layer becomes the current layer and inherits most of
the previous layer's settings, including its algorithm, rule, scale,
location, cursor mode, etc.
The step exponent is set to 0, there is no selection,
no origin offset, and the layer's initial name is "untitled".
</dd>
<dd> Example: <b>newindex = golly.addlayer()</b></dd>
</p>

<a name="clone"></a><p><dt><b>clone()</b></dt>
<dd>
Like <b>addlayer</b> (see above) but the new layer shares the
same universe as the current layer.
The current layer's settings are duplicated and most will be
kept synchronized so that a change to one clone automatically changes
all the others.
Each cloned layer does however have a separate viewport, so the same
pattern can be viewed at different scales and locations
(at the same time if layers are tiled).
</dd>
<dd> Example: <b>cloneindex = golly.clone()</b></dd>
</p>

<a name="duplicate"></a><p><dt><b>duplicate()</b></dt>
<dd>
Like <b>addlayer</b> (see above) but the new layer has a copy of the
current layer's pattern.
Also duplicates all the current settings but, unlike a cloned layer,
the settings are not kept synchronized.
</dd>
<dd> Example: <b>dupeindex = golly.duplicate()</b></dd>
</p>

<a name="dellayer"></a><p><dt><b>dellayer()</b></dt>
<dd>
Delete the current layer.  The current layer changes to the previous
layer (unless layer 0 was deleted).
</dd>
</p>

<a name="movelayer"></a><p><dt><b>movelayer(<i>fromindex, toindex</i>)</b></dt>
<dd>
Move a specified layer to a new position in the layer sequence.
The chosen layer becomes the current layer.
</dd>
<dd> Example: <b>golly.movelayer(1, 0)</b></dd>
</p>

<a name="setlayer"></a><p><dt><b>setlayer(<i>index</i>)</b></dt>
<dd>
Set the current layer to the layer with the given index,
an integer from 0 to <b>numlayers()</b> - 1.
</dd>
<dd> Example: <b>golly.setlayer(0)</b></dd>
</p>

<a name="getlayer"></a><p><dt><b>getlayer()</b></dt>
<dd>
Return the index of the current layer, an integer from 0 to <b>numlayers()</b> - 1.
</dd>
<dd> Example: <b>currindex = golly.getlayer()</b></dd>
</p>

<a name="numlayers"></a><p><dt><b>numlayers()</b></dt>
<dd>
Return the number of existing layers, an integer from 1 to <b>maxlayers()</b>.
</dd>
<dd> Example: <b>if golly.numlayers() > 1: golly.setoption("tilelayers",1)</b></dd>
</p>

<a name="maxlayers"></a><p><dt><b>maxlayers()</b></dt>
<dd>
Return the maximum number of layers (10 in this implementation).
</dd>
</p>

<a name="setname"></a><p><dt><b>setname(<i>string, index=current</i>)</b></dt>
<dd>
Set the name of the given layer, or the current layer's name
if no index is supplied.
</dd>
<dd> Example: <b>golly.setname("temporary")</b></dd>
</p>

<a name="getname"></a><p><dt><b>getname(<i>index=current</i>)</b></dt>
<dd>
Return the given layer's name, or the current layer's name
if no index is supplied.
</dd>
<dd> Example: <b>if golly.getname() == "temporary": golly.dellayer()</b></dd>
</p>

<p><a name="miscellaneous">
&nbsp;<br>
MISCELLANEOUS COMMANDS

<a name="setoption"></a><p><dt><b>setoption(<i>name, value</i>)</b></dt>
<dd>
Set the given option to the given value.
The old value is returned to make it easy to restore a setting.
Here are all the valid option names and their possible values:
</dd>
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr><td><b>"autofit"</b></td><td width=20>       </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"boldspacing"</b></td><td width=20>   </td><td>2 to 1000 (cells)</td></tr>
<tr><td><b>"fullscreen"</b></td><td width=20>    </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"hashing"</b></td><td width=20>       </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"hyperspeed"</b></td><td width=20>    </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"maxdelay"</b></td><td width=20>      </td><td>0 to 5000 (millisecs)</td></tr>
<tr><td><b>"mindelay"</b></td><td width=20>      </td><td>0 to 5000 (millisecs)</td></tr>
<tr><td><b>"opacity"</b></td><td width=20>       </td><td>1 to 100 (percent)</td></tr>
<tr><td><b>"savexrle"</b></td><td width=20>      </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showboldlines"</b></td><td width=20> </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showexact"</b></td><td width=20>     </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showgrid"</b></td><td width=20>      </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showhashinfo"</b></td><td width=20>  </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showlayerbar"</b></td><td width=20>  </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showpatterns"</b></td><td width=20>  </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showscripts"</b></td><td width=20>   </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showstatusbar"</b></td><td width=20> </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"showtoolbar"</b></td><td width=20>   </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"stacklayers"</b></td><td width=20>   </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"swapcolors"</b></td><td width=20>    </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"switchlayers"</b></td><td width=20>  </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"synccursors"</b></td><td width=20>   </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"syncviews"</b></td><td width=20>     </td><td>1 or 0 (True or False)</td></tr>
<tr><td><b>"tilelayers"</b></td><td width=20>    </td><td>1 or 0 (True or False)</td></tr>
</table>
</dd>
<p>
<dd> Example: <b>oldhash = golly.setoption("hashing", True)</b></dd>
</p>

<a name="getoption"></a><p><dt><b>getoption(<i>name</i>)</b></dt>
<dd>
Return the current value of the given option.
See above for a list of all the valid option names.
</dd>
<dd> Example: <b>if not golly.getoption("hashing"): golly.setrule("b0")</b></dd>
</p>

<a name="setcolor"></a><p><dt><b>setcolor(<i>name, r, g, b</i>)</b></dt>
<dd>
Set the given color to the given RGB values (integers from 0 to 255).
The old RGB values are returned as a 3-tuple to make it easy to restore the color.
Here is a list of all the valid color names and how they are used:
</dd>
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr><td><b>"livecells0"</b></td><td width=20>  </td><td>for displaying live cells in layer 0</td></tr>
<tr><td>...</td><td width=20>                  </td><td>...</td></tr>
<tr><td><b>"livecells9"</b></td><td width=20>  </td><td>for displaying live cells in layer 9</td></tr>
<tr><td><b>"deadcells"</b></td><td width=20>   </td><td>for displaying dead cells</td></tr>
<tr><td><b>"paste"</b></td><td width=20>       </td><td>for pasting patterns</td></tr>
<tr><td><b>"select"</b></td><td width=20>      </td><td>for selections (will be 50% transparent)</td></tr>
<tr><td><b>"hashing"</b></td><td width=20>     </td><td>for status bar background if hashing</td></tr>
<tr><td><b>"nothashing"</b></td><td width=20>  </td><td>for status bar background if not hashing</td></tr>
</table>
</dd>
<p>
<dd> Example: <b>oldrgb = golly.setcolor("livecells0", 0, 0, 255)</b></dd>
</p>

<a name="getcolor"></a><p><dt><b>getcolor(<i>name</i>)</b></dt>
<dd>
Return the current RGB values for the given color as a 3-tuple.
See above for a list of all the valid color names.
</dd>
<dd> Example: <b>r, g, b = golly.getcolor("deadcells")</b></dd>
</p>

<a name="getstring"></a><p><dt><b>getstring(<i>prompt, initial="", title=""</i>)</b></dt>
<dd>
Display a dialog box and get a string from the user.
If the initial string is supplied it will be shown and selected.
If the title string is supplied it will be used in the dialog's title bar.
The script will be aborted if the user hits the dialog's Cancel button.
</dd>
<dd> Example: <b>i = int( golly.getstring("Enter a number:","100") )</b></dd>
</p>

<a name="getkey"></a><p><dt><b>getkey()</b></dt>
<dd>
Return a key hit by the user as a single character,
or an empty string if no key was hit.
The characters returned by this command are a subset of ASCII:
</dd>
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr><td><b>' '</b> to <b>'~'</b></td><td width=20> </td><td>all displayable characters (space to tilde)</td></tr>
<tr><td><b>chr(8)</b></td><td width=20>            </td><td>backspace or delete</td></tr>
<tr><td><b>chr(9)</b></td><td width=20>            </td><td>tab</td></tr>
<tr><td><b>chr(13)</b></td><td width=20>           </td><td>return or enter</td></tr>
<tr><td><b>chr(28)</b> to <b>chr(31)</b></td><td width=20> </td><td>left, right, up, down arrows</td></tr>
</table>
</dd>
<p>
<dd> Example: <b>ch = golly.getkey()</b></dd>
</p>

<a name="dokey"></a><p><dt><b>dokey(char)</b></dt>
<dd>
This command allows limited keyboard interaction while a script is running.
The given character is passed to Golly's keyboard event handler, but all
keyboard shortcuts that can change the current pattern will be ignored.
</dd>
<dd> Example: <b>golly.dokey( golly.getkey() )</b></dd>
</p>

<a name="show"></a><p><dt><b>show(<i>message</i>)</b></dt>
<dd>
Show the given string in the bottom line of the status bar.
The status bar is automatically shown if necessary.
</dd>
<dd> Example: <b>golly.show("Hit any key to continue...")</b></dd>
</p>

<a name="error"></a><p><dt><b>error(<i>message</i>)</b></dt>
<dd>
Beep and show the given string in the bottom line of the status bar.
The status bar is automatically shown if necessary.
</dd>
<dd> Example: <b>golly.error("The pattern is empty.")</b></dd>
</p>

<a name="warn"></a><p><dt><b>warn(<i>message</i>)</b></dt>
<dd>
Beep and show the given string in a modal warning dialog.
Useful for debugging Python scripts or displaying error messages.
</dd>
<dd> Example: <b>golly.warn("xxx = " + str(xxx))</b></dd>
</p>

<a name="note"></a><p><dt><b>note(<i>message</i>)</b></dt>
<dd>
Show the given string in a modal information dialog.
Useful for displaying multi-line results.
</dd>
<dd> Example: <b>golly.note("Line 1\nLine 2\nLine 3")</b></dd>
</p>

<a name="check"></a><p><dt><b>check(<i>bool</i>)</b></dt>
<dd>
When Golly runs a script this setting is initially True,
which means that event checking is enabled.
If the given parameter is False then event checking is disabled.
Typically used to prevent mouse clicks being seen at the wrong time.
This should only be done for short durations because the script
cannot be aborted while the setting is False.
</dd>
<dd> Example: <b>golly.check(False)</b></dd>
</p>

<a name="exit"></a><p><dt><b>exit(<i>message=""</i>)</b></dt>
<dd>
Exit the script with an optional error message.
If a non-empty string is supplied then it will be displayed in the status bar
along with a beep, just like the <a href="#error"><b>error</b></a> command.
If no message is supplied, or if the string is empty, then there is no beep
and the current status bar message will not be changed.
</dd>
<dd> Example: <b>if golly.empty(): golly.exit("There is no pattern.")</b></dd>
</p>


<p><a name="lists">
&nbsp;<br>
<font size=+1><b>Cell lists and rectangle lists</b></font>

<p>
Some of Golly's scripting commands manipulate patterns in the form of cell lists.
A cell list is simply a Python list containing integer cell coordinates:
<p>
<dd><b>[ x1, y1, x2, y2 . . . xn, yn ]</b></dd>
<p>
A cell list should always contain an even number of integers.
The ordering of cells within the list doesn't matter.
Note that positive y values increase downwards in Golly's coordinate system.

<p>
Some commands manipulate rectangles in the form of lists.
An empty rectangle is indicated by a list with no items; ie. <b>[]</b>.
A non-empty rectangle is indicated by a list containing four integers:
<p>
<dd><b>[ left, top, width, height ]</b></dd>
<p>
The first two items specify the cell at the top left corner of the
rectangle.  The last two items specify the rectangle's size (in cells).
The width and height must be greater than zero.


<p><a name="glife">
&nbsp;<br>
<font size=+1><b>Using the glife package</b></font>

<p>
The glife folder included in the Scripts folder is a Python package that
provides a high-level interface to some of Golly's scripting commands
(it's based on Eugene Langvagen's <b>life</b> package included in
<a href="http://plife.sourceforge.net/">PLife</a>).
When a script imports <b>glife</b> or any of its submodules, Python
automatically executes the <b>__init__.py</b> module.  This module defines
the <b>pattern</b> and <b>rect</b> classes as well as a number of
useful synonyms and helper functions.  For example, consider this script:
<p>
<dd><b>from glife import *</b></dd>
<dd><b>blinker = pattern("3o!")</b></dd>
<dd><b>blinker.put(1, 2)</b></dd>
<dd><b>blinker.put(6, 7, rcw)</b>&nbsp;&nbsp; # rcw means rotate clockwise</dd>
</p>
<p>
Here is the equivalent script without using <b>glife</b>:
<p>
<dd><b>import golly as g</b></dd>
<dd><b>blinker = g.parse("3o!", 0, 0, 1, 0, 0, 1)</b></dd>
<dd><b>g.putcells(blinker, 1, 2, 1, 0, 0, 1)</b></dd>
<dd><b>g.putcells(blinker, 6, 7, 0, -1,  1,  0)</b></dd>
</p>
<p>
Here are some helper functions defined in <b>glife</b>:
<p>
<dd>
<table cellspacing=0 cellpadding=0>
<tr>
   <td><b>validint(s)</b></td><td width=10> </td>
   <td> &mdash; return True if given string is a valid integer</td>
</tr>
<tr>
   <td><b>getposint()</b></td><td width=10> </td>
   <td> &mdash; return viewport position as a tuple with 2 integers</td>
</tr>
<tr>
   <td><b>setposint(x,y)</b></td><td width=10> </td>
   <td> &mdash; use given integers to set viewport position</td>
</tr>
<tr>
   <td><b>getminbox(patt)</b></td><td width=10> </td>
   <td> &mdash; return minimal bounding box of given pattern</td>
</tr>
</table>
</dd>
</p>
<p>
Most of the examples in the Scripts folder import <b>glife</b>,
but it isn't compulsory.  You might prefer to create your own high-level
interface for the scripts you write.


<p><a name="problems">
&nbsp;<br>
<font size=+1><b>Potential problems</b></font>

<p>
1.
The Python interpreter's memory allocator never releases memory back to the
operating system.  If you run a complicated or buggy script that uses lots
of (Python) memory then that memory is no longer available for use by Golly,
so you might need to quit Golly and restart.
Python 2.5 has a smarter memory allocator that does release memory in
some stuations, but it's still far from ideal.

<p>
2.
The first time you run a script that imports a particular module,
the Python interpreter caches the results so it won't need to reload that
module the next time it is imported.  This is good for efficiency, but it's
a problem if you've modified an imported module and you want to test your changes.
One solution is to quit Golly and restart.  A better solution is to force the
module to be reloaded by inserting a line like
<p>
<dd><b>import mymodule ; reload(mymodule)</b></dd>
</p>
<p>
at the start of each script that imports the module.
When the module is stable you can remove or comment out the above line.

<p>
3.
The escape key check to abort a running script is not done by Python but
by each Golly scripting command.  This means that very long Python computations
should call an occasional "no-op" command like <b>run(0)</b> to allow the
script to be aborted in a timely manner.


<p><a name="macpython">
&nbsp;<br>
<font size=+1><b>Universal Python on Mac OS X</b></font>

<p>
Even though Apple supply Python with OS X, it is usually not the latest version.
If you have an Intel Mac then it's a good idea to download and install
Universal Python 2.4 from
<a href="http://pythonmac.org/packages/py24-fat/">pythonmac.org</a>.
This will install Python 2.4 in /Library/Frameworks.
However, Golly is linked against the Python 2.3 framework stored in
/System/Library/Frameworks and won't use the newer Python.
Fortunately there is a simple solution that forces Golly to load the Python 2.4
framework.  Quit Golly, open Terminal and enter this command (on one line):
<p>
<dd><b>install_name_tool -change \</b></dd>
<dd><b>/System/Library/Frameworks/Python.framework/Versions/2.3/Python \</b></dd>
<dd><b>/Library/Frameworks/Python.framework/Versions/2.4/Python \</b></dd>
<dd><b>/path/to/Golly/folder/Golly.app/Contents/MacOS/Golly</b></dd>
</p>
<p>
If you ever need to switch back to the system-supplied Python then just
run the command again with the framework paths swapped.
To verify which version of Python Golly is using, copy the following code,
start up Golly and select <b>Run Clipboard</b> from the File menu:
<p>
<dd><b>import golly, sys</b></dd>
<dd><b>golly.note(sys.version)</b></dd>
</p>
<p>
On an Intel Mac your scripts will run significantly faster when using
Universal Python.


<p><a name="copyright">
&nbsp;<br>
<font size=+1><b>Python copyright notice</b></font>

<p>
Golly uses an embedded Python interpreter to execute scripts.
The Python license agreement is included in Golly's LICENSE file.
Here is the official Python copyright notice:
<p>
<dd>Copyright (c) 2001-2007 Python Software Foundation.</dd>
<dd>All Rights Reserved.</dd>
</p>
<p>
<dd>Copyright (c) 2000 BeOpen.com.</dd>
<dd>All Rights Reserved.</dd>
</p>
<p>
<dd>Copyright (c) 1995-2001 Corporation for National Research Initiatives.</dd>
<dd>All Rights Reserved.</dd>
</p>
<p>
<dd>Copyright (c) 1991-1995 Stichting Mathematisch Centrum, Amsterdam.</dd>
<dd>All Rights Reserved.</dd>
</p>

</body>
</html>
