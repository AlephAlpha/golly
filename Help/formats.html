<html>
<title>Golly Help: File Formats</title>
<body bgcolor="#FFFFCE">

<p>
Here are the important file formats used by Golly:

<p>
<dd><a href="#rle"><b>Extended RLE format (.rle)</b></a></dd>
<dd><a href="#mc"><b>Macrocell format (.mc)</b></a></dd>
<dd><a href="#colors"><b>Rule colors (.colors)</b></a></dd>
<dd><a href="#icons"><b>Rule icons (.icons)</b></a></dd>
<dd><a href="#table"><b>Rule tables (.table)</b></a></dd>
<dd><a href="#tree"><b>Rule trees (.tree)</b></a></dd>
</p>


<p><a name="rle">&nbsp;<br>
<font size=+1><b>Extended RLE format</b></font>

<p>
Golly prefers to store patterns and pattern fragments in a simple
concise textual format we call "Extended RLE" (it's a modified version
of the RLE format created by Dave Buckingham).  The data is run-length
encoded which works well for sparse patterns while still being easy to
interpret (either by a machine or by a person).  The format permits
retention of the most critical data:

<p>
<ul>
<li> The cell configuration; ie. which cells have what values.
<li> The transition rule to be applied.
<li> Any comments or description.
<li> The generation count.
<li> The absolute position on the screen.
</ul>

<p>
Golly uses this format for internal cuts and pastes, which makes it
very convenient to move cell configurations to and from text files.
For instance, the r-pentomino is represented as

<p>
<dd><tt>x = 3, y = 3, rule = B3/S23</tt></dd>
<dd><tt>b2o$2o$bo!</tt></dd>
</p>

<p>
I just drew this pattern in Golly, selected the whole thing,
copied it to the clipboard, and then in my editor I did a paste
to get the textual version.  Similarly, data in this format can
be cut from a browser or email window and pasted directly into Golly.

<p>
RLE data is indicated by a file whose first non-comment line starts
with "x".  A comment line is either a blank line or a line beginning
with "#".  The line starting with "x" gives the dimensions of the
pattern and usually the rule, and has the following format:

<p>
<dd><tt>x = <i>width</i>, y = <i>height</i>, rule = <i>rule</i></tt></dd>
</p>

<p>
where <i>width</i> and <i>height</i> are the dimensions of the pattern
and <i>rule</i> is the rule to be applied.
Whitespace can be inserted at any point in this line
except at the beginning or where it would split a token.
The dimension data is ignored when Golly loads a pattern, so it need
not be accurate, but it is <em>not</em> ignored when Golly pastes a pattern;
it is used as the boundary of what to paste, so it may be larger or
smaller than the smallest rectangle enclosing all live cells.

<p>
Any line that is not blank, or does not start with a "#" or "x " or
"x=" is treated as run-length encoded pattern data.  The data is
ordered a row at a time from top to bottom, and each row is ordered
left to right.  A "$" represents the end of each row and an optional
"!" represents the end of the pattern.

<p>
For two-state rules, a "b" represents an off cell, and a "o"
represents an on cell.  For rules with more than two states, a "."
represents a zero state; states 1..24 are represented by "A".."X",
states 25..48 by "pA".."pX", states 49..72 by "qA".."qZ", and on up to
states 241..255 represented by "yA".."yo".  The pattern reader is
flexible and will permit "b" and "." interchangeably and "o" and "A"
interchangeably.

<p>
Any data value or row terminator can be immediately preceded with an
integer indicating a repetition count.  Thus, "3o" and "ooo"
both represent a sequence of three on cells, and "5$" means finish the
current row and insert four blank rows, and start at the left side of
the row after that.

<p>
The pattern writer attempts to keep lines about 70 characters long for
convenience when sharing patterns or storing them in text files, but the
reader will accept much longer lines.

<p>
If the File menu's "Save Extended RLE" option is ticked then comment
lines with a specific format will be added at the start of the file
to convey extra information.
These comment lines start with "#CXRLE" and contain keyword/value pairs.
The keywords currently supported are "Pos", which denotes the absolute
position of the upper left cell (which may be on or off),
and "Gen", which denotes the generation count.  For instance,

<p>
<dd><tt>#CXRLE Pos=0,-1377 Gen=3480106827776</tt></dd>
</p>

<p>
indicates that the upper left corner of the enclosing rectange is at
an X coordinate of 0 and a Y coordinate of -1377, and that the
pattern stored is at generation 3,480,106,827,776.

<p>
All comment lines that are not CXRLE lines, and occur at the top or
bottom of the file, are treated as information lines and are displayed
when the user clicks the "information" button in Golly's tool bar.
Any comment lines interspersed with the pattern data will not be
displayed.


<p><a name="mc">&nbsp;<br>
<font size=+1><b>Macrocell format</b></font>

<p>
!!!


<p><a name="colors">&nbsp;<br>
<font size=+1><b>Rule colors</b></font>

<p>
Whenever Golly switches to a new rule it looks inside the Rules folder
for a matching <i>rule</i>.colors file and, if it exists, loads the
color information stored in the file.
A rule string can contain characters not allowed in file names
("/", "\" and ":"), so Golly will substitute those characters with hyphens.
For example, if you wanted to change the colors associated with the rule
12/34/6 then you'd need to create a file called 12-34-6.colors.

<p>
A .colors file is an ordinary text file.
Any blank lines or lines starting with "#" are ignored.
To specify the rgb colors for states 1, 2 and 3 you can use
lines like these:

<p>
<dd><tt>color = 1 &nbsp; 0 128 255 &nbsp; (light blue)</tt></dd>
<dd><tt>color = 2 255 255 255      &nbsp; (white)</tt></dd>
<dd><tt>color = 3 255 128 &nbsp; 0 &nbsp; (orange)</tt></dd>
</p>

<p>
Any text after the final number on each line is ignored.
To specify a color gradient you can use a line like this:

<p>
<dd><tt>gradient = 0 0 255 &nbsp;255 0 0 &nbsp; (blue to red)</tt></dd>
</p>

<p>
Note that a .colors file is loaded <i>after</i> switching to the current
algorithm's default color scheme.  So you have the choice of completely
changing all the default colors, or replacing just a few of them.
Use <a href="prefs#color">Preferences > Color</a> to change the default
colors for each algorithm.


<p><a name="icons">&nbsp;<br>
<font size=+1><b>Rule icons</b></font>

<p>
Whenever Golly switches to a new rule it looks inside the Rules folder
for a matching <i>rule</i>.icons file and, if it exists, loads the
icon bitmaps stored in the file.
Note that a rule string can contain characters not allowed in file names
("/", "\" and ":"), so Golly will substitute those characters with hyphens.
For example, if you wanted to change the icons associated with the rule
12/34/6 then you'd need to create a file called 12-34-6.icons.

<p>
Golly can load the bitmaps from BMP, GIF, PNG or TIFF files.
The following picture shows how the bitmaps must be arranged:

<p><center><img src="icon_format.bmp"></center></p>

<p>
The top row contains one or more icons of size 15x15, so the total width
must be a multiple of 15.
The bottom row contains icons of size 7x7, where each icon is under the
bottom left corner of its corresponding 15x15 icon.
The 7x7 icons are optional; if not supplied (i.e., the total height is 15
rather than 22) then Golly will create them by scaling down the 15x15 icons.
Scaled icons can look rather ugly, so this isn't recommended.
Pure black (0,0,0) must be used for the areas you want to be transparent.
The non-black areas will be replaced with the current cell's state color.
If the number of icons supplied is fewer than the number of live states
then the last icon is automatically duplicated.  If there are more icons
than required then the extra icons are simply ignored.

<p>
If Golly can't find any rule-specific icons it will use the default
icons associated with each algorithm.  You can change these icons by using
the "Load Icons" button in <a href="prefs#color">Preferences > Color</a>
to load files with the same format described above.  The only difference
is that there is no need for a .icons extension.


<p><a name="table">&nbsp;<br>
<font size=+1><b>Rule tables</b></font>

<p>Golly allows you to add new rules by creating transition tables stored in external files.  Given the rule string "foo", the RuleTable algorithm will look inside the Rules folder for a file called foo.table.</p>
 
<p>
Example file:
<pre><tt>        # Signals (2/3) pass alongside a wire (1):
        n_states:4
        neighborhood:vonNeumann
        symmetries:rotate4
        var a={2,3}
        var b={2,3}
        var c={2,3}
        a,0,b,1,c,b
</tt></pre></p>

<p>(See the <tt>.table</tt> files in the Rules folder for more examples.)</p>

<p>Empty lines and those beginning with the hash symbol "#" are ignored.</p>

<p>
Required descriptors: (must appear before other content)<br>
<ul><li><b><tt>n_states:</tt></b> specifies the number of states in the CA (from 0 to n_states-1 inclusive).</li>
<li><b><tt>neighborhood:</tt></b> specifies the cell neighborhood for the CA update step. Must be one of: <tt>vonNeumann</tt>, <tt>Moore</tt>.</li>
<li><b><tt>symmetries:</tt></b> can be one of the following: <tt>none</tt>, <tt>rotate4</tt>, <tt>rotate8</tt>, <tt>reflect</tt>, <tt>rotate4reflect</tt>, <tt>rotate8reflect</tt>. Hopefully these are self-explanatory.</li></ul></p>

<p>
The rest of the file contains variables and transitions. Variable names should only use the letters a-z,A-Z (case-sensitive). Each variable line should follow the form above to list the states. Variables should appear before the first transition that uses them.</p>

<p>Transition lines should have states or variables separated by commas. If there are no variables and <tt>n_states</tt>&lt;11 then no comma should be used. Only one transition (or variable) should appear on each line. Inputs are listed in the order C,N,E,S,W,C' for the von Neumann neighborhood, and C,N,NE,E,SE,S,SW,W,NW,C' for the Moore neighborhood.</p>

<p>Where the same variable appears more than once in a transition, it stands for the same state each time. A transition can have a variable as its output (C') but only where that variable appears more than once, so that it has a definite value. The transition in the example above expands to the following: <tt>20212->2</tt>, <tt>20213->2</tt>, <tt>20312->3</tt>, <tt>20313->3</tt>, <tt>30212->2</tt>, <tt>30213->2</tt>, <tt>30312->3</tt>, <tt>30313->3</tt>, and all 90-degree rotations of those (because of the <tt>rotate4</tt> symmetry).</p>

<p>Rule tables usually don't specify every possible set of inputs. For those not listed, the central cell remains unchanged.</p>

<p>(This form of CA rule table representation comes from Gianluca Tempesti's PhD thesis: <a href="http://lslwww.epfl.ch/pages/embryonics/thesis/AppendixA.html">http://lslwww.epfl.ch/pages/embryonics/thesis/AppendixA.html</a>.)</p>

<p>If you have a C/C++ implementation of a transition function, there is a way to automatically produce a rule table file. See <tt>Rules/TableGenerators/make-ruletable.cpp</tt> for instructions.</p> 

<p><a name="tree">&nbsp;<br>
<font size=+1><b>Rule trees</b></font>

<p>
!!!

</body>
</html>
